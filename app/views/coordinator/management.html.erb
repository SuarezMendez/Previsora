<%= javascript_include_tag "coordinator/management" %>

<div class="m-30-60">
  <h4 class="justify">
    Bienvenido apreciado(a) <%= @user.name.titleize %>.
    <br><br>
    Aquí podrá administrar los usuarios de la Base de datos única.
  </h4>
  <br>

  <%= search_form_for @search, url: coordinator_management_url, class:"" do |f| %>
    <div class="row flexBox">
      <div class="col-sm-4">
        <%= f.text_field :name_cont, placeholder: "NOMBRE", class:"form-control m-5 mb-5" %>
      </div>
      <div class="col-sm-4">
        <div class="styled-select m-5">
          <%= f.select :role_eq, options_for_select([["ROL", nil], ["ABOGADO INTERNO", 1], ["COORDINADOR", 2], ["ADMINISTRADOR", 3]]), {}, {} %>
        </div>
      </div>
      <div class="col-sm-1 center">
        <button type="submit" class="btn btn-default">
          <span class="glyphicon glyphicon-search"></span>
        </button>
      </div>
      <div class="col-sm-1 center">
        <%= link_to new_user_registration_path, class:"link" do %>
            <span class="glyphicon glyphicon-plus btn btn-default"></span>
        <% end %>
      </div>
    </div>
  <% end %>
  <br>

  <div class="floatRight">
    <h4><%= @page+1 %>-<%= @users.length + @page %> de <%= @search.result.length %></h4>
  </div>
  <br>

  <table class="table table-hover table-responsive">
    <thead>
      <tr class="to-uc">
        <th scope="col"><%= sort_link @search, :name, "Nombre", {}, :class => 'link' %></th>
        <th scope="col"><%= sort_link @search, :role, "Rol", {}, :class => 'link' %></th>
        <th scope="col" width="5%"></th>
        <th scope="col" width="5%"></th>
      </tr>
    </thead>
    <tbody>
      <% if @users == [] %>
      <% else %>
        <% @users.each do |u| %>
          <tr id=<%= u.id %>>
            <td><%= u.name.titleize %></td>
            <td><%= u.get_role_name.titleize %></td>
            <td><%= link_to coordinator_edit_path(u), id:"e#{u.id}", class:"link", hidden:"true" do %><span class="glyphicon glyphicon-edit"></span><% end %></td>
            <td><%= link_to coordinator_delete_path(u), id:"t#{u.id}", method: :delete, data: { confirm: '¿Esta seguro de eliminar al usuario?'}, class:"link", hidden:"true" do %><span class="glyphicon glyphicon-trash"><% end %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>

  <div class="container-fluid center">
    <%= will_paginate @users, renderer: BootstrapPagination::Rails, class: "pagination-lg", :previous_label => t("Anterior"), :next_label => t("Siguiente")%>
  </div>

</div>
